/**
 * videojs-contrib-dash
 * @version 2.10.0
 * @copyright 2018 Brightcove, Inc
 * @license Apache-2.0
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var a;a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,a.videojsDash=e()}}(function(){return function e(a,t,r){function n(o,s){if(!t[o]){if(!a[o]){var d="function"==typeof require&&require;if(!s&&d)return d(o,!0);if(i)return i(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=t[o]={exports:{}};a[o][0].call(u.exports,function(e){var t=a[o][1][e];return n(t||e)},u,u.exports,e,a,t,r)}return t[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)n(r[o]);return n}({1:[function(e,a,t){(function(e){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,a){function t(e){return"dash-audio-"+e}function r(e,a){return e.find(function(e){return t(e.index)===a.id})}var n=e.dash.mediaPlayer,i=n.getTracksFor("audio"),s=e.audioTracks();s.length&&a.clearTracks(["audio"]);var l=n.getCurrentTrackFor("audio");i.forEach(function(e){var a=e.lang;e.roles&&e.roles.length&&(a+=" ("+e.roles.join(", ")+")"),s.addTrack(new d["default"].AudioTrack({enabled:e===l,id:t(e.index),kind:e.kind||"main",label:a,language:e.lang}))});var u=function(){for(var e=0;e<s.length;e++){var a=s[e];if(a.enabled){var t=r(i,a);n.setCurrentTrack(t)}else;}};s.addEventListener("change",u),e.dash.mediaPlayer.on(o["default"].MediaPlayer.events.STREAM_TEARDOWN_COMPLETE,function(){s.removeEventListener("change",u)})}function n(e,a){e.dash.mediaPlayer.on(o["default"].MediaPlayer.events.PLAYBACK_METADATA_LOADED,r.bind(null,e,a))}t.__esModule=!0,t["default"]=n;var i="undefined"!=typeof window?window.dashjs:void 0!==e?e.dashjs:null,o=a(i),s="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,d=a(s)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,a,t){(function(e){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,a){for(var t=0;t<e.length;t++)if(a(e[t]))return e[t]}function n(e,a,t){function n(){for(var a=e.dash.mediaPlayer,n=e.textTracks(),o=-1,s=0;s<n.length;s+=1)!function(e){var a=n[e];if("showing"===a.mode){var s=r(i,function(e){return e.textTrack===a}),d=s?s.dashTrack:null;d&&(o=t.indexOf(d))}}(s);o!==a.getCurrentTextTrackIndex()&&a.setTextTrack(o)}var i=[],o=t.map(function(e){return{dashTrack:e,trackConfig:{label:e.lang,language:e.lang,srclang:e.lang,kind:e.kind}}}).map(function(a){var t=a.trackConfig,r=a.dashTrack,n=e.addRemoteTextTrack(t,!1);return i.push({textTrack:n.track,dashTrack:r}),n});return e.textTracks().on("change",n),e.dash.mediaPlayer.on(s["default"].MediaPlayer.events.STREAM_TEARDOWN_COMPLETE,function(){e.textTracks().off("change",n)}),n(),o}function i(e,a,t){function r(){o.forEach(e.removeRemoteTextTrack.bind(e)),o=[]}function i(l){var u=(l.index,l.tracks);d.off(s["default"].MediaPlayer.events.TEXT_TRACKS_ADDED,i),r(),u.length&&(o=n(e,a,u,t))}window.VTTCue&&!/\[native code\]/.test(window.VTTCue.toString())&&(window.VTTCue=!1);var o=[];if(a.featuresNativeTextTracks)return void l["default"].log.error("You must pass {html: {nativeCaptions: false}} in the videojs constructor to use text tracks in videojs-contrib-dash");var d=e.dash.mediaPlayer;d.on(s["default"].MediaPlayer.events.TEXT_TRACKS_ADDED,i),d.on(s["default"].MediaPlayer.events.CAN_PLAY,function(){d.off(s["default"].MediaPlayer.events.TEXT_TRACKS_ADDED,i)})}t.__esModule=!0,t["default"]=i;var o="undefined"!=typeof window?window.dashjs:void 0!==e?e.dashjs:null,s=a(o),d="undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null,l=a(d)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,a,t){(function(e){var t;t="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},a.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(e,a,t){(function(a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var i=e("global/window"),o=r(i),s="undefined"!=typeof window?window.videojs:void 0!==a?a.videojs:null,d=r(s),l="undefined"!=typeof window?window.dashjs:void 0!==a?a.dashjs:null,u=r(l),c=e("./setup-audio-tracks"),f=r(c),h=e("./setup-text-tracks"),y=r(h),p=function(){function e(a,t,r){var i=this;if(n(this,e),r=r||t.options_,this.player=(0,d["default"])(r.playerId),this.player.dash=this.player.dash||{},this.tech_=t,this.el_=t.el(),this.elParent_=this.el_.parentNode,this.hasFiniteDuration_=!1,a.src){t.isReady_=!1,e.updateSourceData&&(d["default"].log.warn('updateSourceData has been deprecated. Please switch to using hook("updatesource", callback).'),a=e.updateSourceData(a)),e.hooks("updatesource").forEach(function(e){a=e(a)});var o=a.src;this.keySystemOptions_=e.buildDashJSProtData(a.keySystemOptions),this.player.dash.mediaPlayer=u["default"].MediaPlayer().create(),this.mediaPlayer_=this.player.dash.mediaPlayer,e.useVideoJSDebug&&(d["default"].log.warn('useVideoJSDebug has been deprecated. Please switch to using hook("beforeinitialize", callback).'),e.useVideoJSDebug(this.mediaPlayer_)),e.beforeInitialize&&(d["default"].log.warn('beforeInitialize has been deprecated. Please switch to using hook("beforeinitialize", callback).'),e.beforeInitialize(this.player,this.mediaPlayer_)),e.hooks("beforeinitialize").forEach(function(e){e(i.player,i.mediaPlayer_)}),this.mediaPlayer_.initialize(),this.retriggerError_=function(e){if("capability"===e.error&&"mediasource"===e.event)i.player.error({code:4,message:"The media cannot be played because it requires a feature that your browser does not support."});else if("manifestError"!==e.error||"createParser"!==e.event.id&&"codec"!==e.event.id&&"nostreams"!==e.event.id&&"nostreamscomposed"!==e.event.id&&"parse"!==e.event.id&&"multiplexedrep"!==e.event.id)if("mediasource"===e.error)e.event.match("MEDIA_ERR_ABORTED")?i.player.error({code:1,message:e.event}):e.event.match("MEDIA_ERR_NETWORK")?i.player.error({code:2,message:e.event}):e.event.match("MEDIA_ERR_DECODE")?i.player.error({code:3,message:e.event}):e.event.match("MEDIA_ERR_SRC_NOT_SUPPORTED")?i.player.error({code:4,message:e.event}):e.event.match("MEDIA_ERR_ENCRYPTED")?i.player.error({code:5,message:e.event}):(e.event.match("UNKNOWN"),i.player.error({code:4,message:e.event}));else if("capability"===e.error&&"encryptedmedia"===e.event)i.player.error({code:5,message:"The media cannot be played because it requires encryption features that your browser does not support."});else if("key_session"===e.error)i.player.error({code:5,message:e.event});else if("download"===e.error)i.player.error({code:2,message:"The media playback was aborted because too many consecutive download errors occurred."});else{if("mssError"!==e.error)return;i.player.error({code:3,message:e.event})}else i.player.error({code:4,message:e.event.message});setTimeout(function(){i.mediaPlayer_.reset()},10)},this.mediaPlayer_.on(u["default"].MediaPlayer.events.ERROR,this.retriggerError_),this.getDuration_=function(e){var a=e.data.Period_asArray,t=i.hasFiniteDuration_;e.data.mediaPresentationDuration||a[a.length-1].duration?i.hasFiniteDuration_=!0:i.hasFiniteDuration_=!1,i.hasFiniteDuration_!==t&&i.player.trigger("durationchange")},this.mediaPlayer_.on(u["default"].MediaPlayer.events.MANIFEST_LOADED,this.getDuration_),r.dash&&Object.keys(r.dash).forEach(function(e){var a,t="set"+e.charAt(0).toUpperCase()+e.slice(1),n=r.dash[e];if(i.mediaPlayer_.hasOwnProperty(t)&&(d["default"].log.warn("Using dash options in videojs-contrib-dash without the set prefix has been deprecated. Change '"+e+"' to '"+t+"'"),e=t),!i.mediaPlayer_.hasOwnProperty(e))return void d["default"].log.warn("Warning: dash configuration option unrecognized: "+e);Array.isArray(n)||(n=[n]),(a=i.mediaPlayer_)[e].apply(a,n)}),this.mediaPlayer_.attachView(this.el_),this.mediaPlayer_.setAutoPlay(!1),f["default"].call(null,this.player,t),y["default"].call(null,this.player,t,r),this.mediaPlayer_.setProtectionData(this.keySystemOptions_),this.mediaPlayer_.attachSource(o),this.tech_.triggerReady()}}return e.buildDashJSProtData=function(e){var a={};if(!e||!Array.isArray(e))return null;for(var t=0;t<e.length;t++){var r=e[t],n=d["default"].mergeOptions({},r.options);n.licenseUrl&&(n.serverURL=n.licenseUrl,delete n.licenseUrl),a[r.name]=n}return a},e.prototype.dispose=function(){this.mediaPlayer_&&(this.mediaPlayer_.off(u["default"].MediaPlayer.events.ERROR,this.retriggerError_),this.mediaPlayer_.off(u["default"].MediaPlayer.events.MANIFEST_LOADED,this.getDuration_),this.mediaPlayer_.reset()),this.player.dash&&delete this.player.dash},e.prototype.duration=function(){return this.mediaPlayer_.isDynamic()&&!this.hasFiniteDuration_?Infinity:this.mediaPlayer_.duration()},e.hooks=function(a,t){return e.hooks_[a]=e.hooks_[a]||[],t&&(e.hooks_[a]=e.hooks_[a].concat(t)),e.hooks_[a]},e.hook=function(a,t){e.hooks(a,t)},e.removeHook=function(a,t){var r=e.hooks(a).indexOf(t);return-1!==r&&(e.hooks_[a]=e.hooks_[a].slice(),e.hooks_[a].splice(r,1),!0)},e}();p.hooks_={};var v=function(e){e=JSON.parse(JSON.stringify(e)),p.updateSourceData&&(d["default"].log.warn('updateSourceData has been deprecated. Please switch to using hook("updatesource", callback).'),e=p.updateSourceData(e)),p.hooks("updatesource").forEach(function(a){e=a(e)});var a=document.createElement("video");return!(e.keySystemOptions&&!navigator.requestMediaKeySystemAccess&&!a.msSetMediaKeys)};d["default"].DashSourceHandler=function(){return{canHandleSource:function(e){var a=/\.mpd/i;return v(e)?d["default"].DashSourceHandler.canPlayType(e.type)?"probably":a.test(e.src)?"maybe":"":""},handleSource:function(e,a,t){return new p(e,a,t)},canPlayType:function(e){return d["default"].DashSourceHandler.canPlayType(e)}}},d["default"].DashSourceHandler.canPlayType=function(e){return/^application\/dash\+xml/i.test(e)?"probably":""},o["default"].MediaSource&&d["default"].getTech("Html5").registerSourceHandler(d["default"].DashSourceHandler(),0),d["default"].Html5DashJS=p,t["default"]=p}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./setup-audio-tracks":1,"./setup-text-tracks":2,"global/window":3}]},{},[4])(4)});